<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MiniR√©seau ‚Äì Espace Personnel</title>
  <style>
    :root {
      --bg: #020617;
      --accent: #0b84ff;
      --accent-soft: rgba(59,130,246,0.14);
      --accent-strong: rgba(59,130,246,0.35);
      --muted: #9ca3af;
      --border-subtle: rgba(148,163,184,0.45);
    }
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
      background: radial-gradient(circle at top, #020617 0, #020617 55%, #000 100%);
      color: #e5e7eb;
    }
    .shell {
      max-width: 1120px;
      margin: 0 auto;
      padding: 20px 16px 32px;
    }
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(2,6,23,0.96);
      border: 1px solid var(--border-subtle);
      box-shadow: 0 16px 40px rgba(15,23,42,0.85);
      margin-bottom: 22px;
    }
    .topbar-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .brand-logo {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      background: radial-gradient(circle at 20% 0, #22c55e, #0b84ff 45%, #1d4ed8 80%);
      box-shadow: 0 0 0 2px rgba(15,23,42,0.95);
    }
    .brand-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .brand-title {
      font-size: 15px;
      font-weight: 600;
    }
    .brand-subtitle {
      font-size: 11px;
      color: var(--muted);
    }
    .role-pill {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(22,163,74,0.18);
      color: #bbf7d0;
      border: 1px solid rgba(22,163,74,0.5);
    }
    .topbar-right {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--muted);
    }
    .topbar-nav {
      display: flex;
      gap: 6px;
      margin-right: 8px;
    }
    .nav-btn {
      border: none;
      background: rgba(15,23,42,0.95);
      color: #e5e7eb;
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      cursor: pointer;
      border: 1px solid rgba(148,163,184,0.45);
      transition: 0.15s;
    }
    .nav-btn:hover {
      background: rgba(15,23,42,1);
      border-color: #4ade80;
    }
    .logout-btn {
      border: none;
      background: linear-gradient(135deg,#ef4444,#b91c1c);
      color: white;
      font-size: 11px;
      padding: 6px 11px;
      border-radius: 999px;
      cursor: pointer;
      box-shadow: 0 10px 28px rgba(239,68,68,0.6);
    }
    .logout-btn:hover { filter: brightness(1.05); }
    @media (max-width: 900px) {
      .topbar { flex-direction: column; align-items: flex-start; }
    }
    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 18px;
    }
    @media (max-width: 900px) {
      .layout { grid-template-columns: minmax(0,1fr); }
    }
    .card {
      border-radius: 18px;
      background: linear-gradient(145deg, rgba(15,23,42,0.98), rgba(15,23,42,0.9));
      border: 1px solid var(--border-subtle);
      box-shadow: 0 18px 45px rgba(15,23,42,0.9);
      padding: 18px 18px 16px;
    }
    .card-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 10px;
    }
    .card-title {
      font-size: 16px;
      font-weight: 600;
    }
    .card-subtitle {
      font-size: 12px;
      color: var(--muted);
    }
    .badge-soft {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: var(--accent-soft);
      border: 1px solid var(--accent-strong);
      color: #bfdbfe;
    }
    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 8px;
    }
    @media (max-width: 640px) {
      .grid-2 { grid-template-columns: minmax(0,1fr); }
    }
    .tile {
      padding: 10px 10px 9px;
      border-radius: 12px;
      background: rgba(15,23,42,0.96);
      border: 1px solid rgba(31,41,55,0.9);
    }
    .tile-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 6px;
      font-size: 12px;
    }
    .tile-title {
      font-weight: 600;
    }
    .pill {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(15,23,42,1);
      border: 1px solid rgba(148,163,184,0.45);
      color: var(--muted);
    }
    .tile-body {
      font-size: 11px;
      color: var(--muted);
    }
    .actions-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }
    .action-btn {
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      background: rgba(15,23,42,0.96);
      color: #e5e7eb;
      font-size: 11px;
      padding: 6px 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      text-decoration: none;
      transition: 0.15s;
    }
    .action-btn span { font-size: 13px; }
    .action-btn:hover {
      border-color: #4ade80;
      background: rgba(15,23,42,1);
    }
    .hint {
      margin-top: 10px;
      font-size: 11px;
      color: var(--muted);
    }
    .info-banner {
      margin-bottom: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      background: linear-gradient(120deg,rgba(22,163,74,0.18),rgba(59,130,246,0.12));
      border: 1px solid rgba(34,197,94,0.5);
      font-size: 12px;
    }
    .info-banner strong { color: #bbf7d0; }
  </style>
</head>
<body>
  <div class="shell">
    <header class="topbar">
      <div class="topbar-left">
        <div class="brand-logo"></div>
        <div class="brand-text">
          <div class="brand-title">MiniR√©seau ‚Äì Espace Personnel</div>
          <div class="brand-subtitle">Vue globale du campus num√©rique ESME.</div>
        </div>
        <span class="role-pill">R√¥le actif : Personnel de l'√©cole</span>
      </div>
      <div class="topbar-right">
        <nav class="topbar-nav">
          <button class="nav-btn" onclick="window.location.href='index.html'">Fil √©tudiant</button>
          <button class="nav-btn" onclick="window.location.href='frontend/pages/message.html'">Messagerie</button>
          <button class="nav-btn" onclick="window.location.href='ami.html'">R√©seau d'amis</button>
          <button class="nav-btn" onclick="window.location.href='constellation.html'">Constellation</button>
          <button class="nav-btn" onclick="window.location.href='profil.html'">Profil</button>
        </nav>
        <div id="staffUserLabel">Connect√© en tant que‚Ä¶</div>
        <button class="logout-btn" onclick="logout()">Se d√©connecter</button>
      </div>
    </header>

    <main class="layout">
      <section class="card">
        <div class="info-banner">
          <strong>Espace r√©serv√© au personnel de l'ESME.</strong><br/>
          Surveillez l'activit√© globale, acc√©dez rapidement aux outils de mod√©ration
          et mettez en avant les annonces institutionnelles.
        </div>
        <div class="card-header">
          <div>
            <div class="card-title">Outils de suivi & mod√©ration</div>
            <div class="card-subtitle">Acc√®s centralis√© aux espaces des √©tudiants.</div>
          </div>
          <span class="badge-soft">Privil√®ges personnel</span>
        </div>
        <div class="grid-2">
          <div class="tile">
            <div class="tile-header">
              <div class="tile-title">Fil d'actualit√©</div>
              <span class="pill">Vue institutionnelle</span>
            </div>
            <div class="tile-body">
              Consultez les publications des √©tudiants, suivez les grandes tendances
              et intervenez en cas de besoin (mod√©ration, annonces officielles).
            </div>
            <div class="actions-row">
              <a href="index.html" class="action-btn">
                <span>üì¢</span> Ouvrir le fil
              </a>
            </div>
          </div>
          <div class="tile">
            <div class="tile-header">
              <div class="tile-title">Messagerie & groupes</div>
              <span class="pill">Communication cibl√©e</span>
            </div>
            <div class="tile-body">
              Acc√©dez aux canaux de messagerie pour partager des informations
              administratives et dialoguer avec des promotions sp√©cifiques.
            </div>
            <div class="actions-row">
              <a href="frontend/pages/message.html" class="action-btn">
                <span>üí¨</span> Ouvrir la messagerie
              </a>
            </div>
          </div>
        </div>
        <p class="hint">
          Les futurs outils de reporting et de statistiques pourront √™tre ajout√©s ici
          en se basant sur la m√™me logique de r√¥le <strong>personnel</strong>.
        </p>
      </section>

      <aside class="card">
        <div class="card-header">
          <div>
            <div class="card-title">R√©sum√© campus</div>
            <div class="card-subtitle">Indicateurs √† connecter plus tard.</div>
          </div>
        </div>
        <div class="grid-2">
          <div class="tile">
            <div class="tile-header">
              <div class="tile-title">Groupes actifs</div>
              <span class="pill">Aper√ßu</span>
            </div>
            <div class="tile-body">
              Nombre de groupes de messagerie actifs (√† relier √† la base de
              donn√©es dans une prochaine √©tape).
            </div>
          </div>
          <div class="tile">
            <div class="tile-header">
              <div class="tile-title">Annonces r√©centes</div>
              <span class="pill">Communication</span>
            </div>
            <div class="tile-body">
              Derni√®res annonces importantes publi√©es sur le fil ou via la
              messagerie institutionnelle.
            </div>
          </div>
        </div>
        <p class="hint">
          Pour tester, connectez-vous avec un compte ayant le r√¥le
          <code>personnel</code> puis rechargez cette page.
        </p>
      </aside>
    </main>
  </div>

  <script src="auth.js"></script>
  <script>
    // Verrouiller cette page pour le r√¥le "personnel" uniquement
    (function () {
      try {
        const user = window.requireRole ? window.requireRole('personnel') : null;
        if (!user) return;
        const label = document.getElementById('staffUserLabel');
        if (label) {
          label.textContent = `Connect√© en tant que ${user.username}`;
        }
      } catch (e) {
        console.error('Erreur r√¥le personnel :', e);
      }
    })();
  </script>
</body>
</html>
